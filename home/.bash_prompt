#!/data/data/com.termux/files/usr/bin/bash

function __git_prompt () {
   local status prompt;

   if status=$(git status 2>&1); then
      prompt="$(git symbolic-ref --quiet --short HEAD || git rev-parse --short HEAD)";

      if [[ "$status" == *nothing\ to\ commit* ]]; then
         if ! git rev-parse --quiet --verify stash > /dev/null; then
            prompt=$'\033[38;5;63;1m'"$prompt"$'\033[0m';
         else
            prompt=$'\033[38;5;14;1m'"$prompt"$'\033[0m';
         fi;
      else
         prompt=$'\033[38;5;9;1m'"$prompt"$'\033[0m';
      fi;
      prompt=$' \033[38;5;15;1mon\033[0m '"$prompt";
   fi;
   echo "$prompt";
}

if [ "$(whoami)" != "root" ]; then
   PS1=$'\n\033[38;5;202;1m\u\033[0m';
else
   PS1=$'\n\033[38;5;9;1m\u\033[0m';
fi;

if [ ! -v SSH_TTY ]; then
   PS1+=$'@\033[38;5;226;1m\H\033[0m ';
else
   PS1+=$'@\033[38;5;9;1m\H\033[0m ';
fi;

PS1+='\033[38;5;15;1min\033[0m \033[38;5;63;1m\w\033[0m$(__git_prompt)\n\[\033[38;5;15;1m\]$\[\033[0m\] ';
